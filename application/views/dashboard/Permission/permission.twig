{% extends 'dashboard/layout.twig' %}

{% block content %}
	<div class="main-content d-flex flex-column min-vh-100">
		<div class="container py-5">
			<h5 class="fw-bold mb-2 ps-2">Roles & Permissions</h5>

			<!-- Create Role Button -->
			<div class="mb-4">
				<a href="{{ base_url('permission/create') }}" class="btn btn-sm btn-success">
					+ Create Role
				</a>
			</div>

			<div class="card card-custom w-100">
				<div class="card-body">
					<h6 class="mb-3 fw-bold">Roles List</h6>

					<table class="table table-striped table-bordered align-middle">
						<thead class="table-light">
							<tr>
								<th width="60">ID</th>
								<th>Role Name</th>
								<th width="350">Assigned Permissions</th>
								<th width="150">Action</th>
							</tr>
						</thead>

						<tbody>
							{% if roles is not empty %}
								{% for role in roles %}
									<tr>
										<!-- Role ID -->
										<td>{{ role.id }}</td>

										<!-- Role Name -->
										<td>{{ role.name }}</td>

										<!-- Assigned Permissions -->
										<td>
											{% if role.permissions is not empty %}
												{% for perm in role.permissions %}
													<span class="badge bg-info text-dark me-1">{{ perm }}</span>
												{% endfor %}
											{% else %}
												<span class="badge bg-secondary">No Permission</span>
											{% endif %}
										</td>

										<!-- Action Buttons -->
										<td class="d-flex gap-2">
											<a href="{{ base_url('permission/edit?id=' ~ role.id) }}" class="btn btn-sm btn-primary py-1 px-3">
												Edit
											</a>
										</td>
									</tr>
								{% endfor %}
							{% else %}
								<tr>
									<td colspan="4" class="text-center text-muted">No roles found.</td>
								</tr>
							{% endif %}
						</tbody>
					</table>

				</div>
			</div>
		</div>
	</div>
{% endblock %}
