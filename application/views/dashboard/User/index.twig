{% extends 'dashboard/layout.twig' %}

{% block content %}
	<div
		class="main-content d-flex flex-column min-vh-100">

		<!-- User Heading -->
		<div class="container py-5">
			<h5 class="ps-2">
				User
				<a href="https://adminkit.io/pricing/" target="_blank" class="pro-badge ms-2">
					Pro Component
					<i class="bi bi-box-arrow-up-right ms-1"></i>
				</a>
			</h5>

			<!-- Row: DataTable + Profile -->
			<div class="container-fluid">
				<div
					class="row justify-content-between g-3 align-items-start">

					<!-- Right: Create Button -->
					<div class="mb-3">
						<a href="{{ base_url('create') }}" class="btn btn-sm btn-success">
							+ Create User
						</a>
					</div>

					<!-- DataTable Column -->
					<div class="col-lg-8 col-md-7">
						<div class="card card-custom w-100">
							<div class="card-body">
								<h6 class="mb-3">Users</h6>
								<div class="table-responsive">
									<table id="example" class="table table-striped table-bordered align-middle">
										<thead class="table-light">
											<tr>
												<th>ID</th>
												<th>F-Name</th>
												<th>L-Name</th>
												<th>Email</th>
												<th>Address</th>
												<th>Contact No</th>
												<th>Action</th>
											</tr>
										</thead>
										<tbody>
											{% if users is defined and users|length > 0 %}
												{% for user in users %}
													<tr>
														<td>{{ user.id }}</td>
														<td>{{ user.first_name }}</td>
														<td>{{ user.last_name }}</td>
														<td>{{ user.email }}</td>
														<td>{{ user.address }}</td>
														<td>{{ user.contact_no }}</td>
														<td class="userprofile-action-btns">
															<a href="{{ base_url('edit?id=' ~ user.id) }}" class="btn btn-sm btn-primary">View</a>
															<button type="button" onclick="submitDelete({{ user.id }})" class="btn btn-sm btn-danger">Delete</button>
														</td>
													</tr>
												{% endfor %}
											{% else %}
												<tr>
													<td colspan="7">No users found.</td>
												</tr>
											{% endif %}
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>

					<!-- Profile Column -->
					<div class="col profile-column d-flex justify-content-end">
						<div class="card text-center w-100 profile-outer-card">
							<div class="card-body profile-inner-card-body">
								<h1 class="h5 mb-2">Angelica Ramos</h1>
								<img src="img/avatar-3.jpg" class="userprofile-pic" alt="Profile picture">
								<div class="mb-3 text-start mt-3">
									<h2 class="h6 mb-1">About me</h2>
									<p class="small text-muted profile-text-ellipsis">
										Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
									</p>
								</div>
								<!-- Profile info and activity sections omitted for brevity -->
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>

	</div>

	<!-- Hidden Delete Form for Soft Delete -->
	<form id="deleteForm" method="POST" action="{{ base_url('softDelete') }}" style="display:none;">
		<input type="hidden" name="id" id="deleteId">
	</form>

	<script>
		function submitDelete(id) {
	if (confirm('Are you sure you want to delete this user?')) {
	document.getElementById('deleteId').value = id;
	document.getElementById('deleteForm').submit();
	}
}
	</script>
{% endblock %}
